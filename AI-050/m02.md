# モジュール2: Azure OpenAI Service で作業を開始する

https://learn.microsoft.com/ja-jp/training/modules/get-started-openai/

■Azure OpenAI Studioを利用する手順

- Azure OpenAI Serviceの利用を申請する
  - https://aka.ms/oaiapply
- 申請が承認されるまで待つ
- Azure OpenAI Serviceリソースを作成する
- モデルをデプロイする
- モデルを利用する
  - Azure OpenAI Studioから
  - 独自のアプリから

■モデルの種類

- GPT-4
- GPT 3.5
- Embedded
- DALL-E

■モデルの詳細

- gpt-35-turbo-16k
  - OpenAIが開発した大規模な言語モデルの一種。
  - 最大16,384個のトークン(テキストを分割した単位)を入力として受け付け可能
  - 日本語では約15,000文字程度に相当

■Azure OpenAI Studioとは

Azure OpenAI Service を操作するためのWeb管理画面。

https://oai.azure.com

■プレイグラウンド

- Azure OpenAI Studio のインターフェイス
- 独自のクライアント アプリケーションを開発することなく、デプロイされるモデルを実験するために使用できる

■トークン

Tokens are the basic units of a prompt - essentially words or word-parts in the text.

以下のサイトで、テキストを入力し、そのトークン数を計算できる。
https://platform.openai.com/tokenizer

■トークナイズ

https://cardinal-moon.hatenablog.com/entry/tokenize_and_subword

文章をトークンに分割すること。

```
私は日本人です。
↓
私/は/日本人/です/。
```

トークン＝単語というわけではなく、単語がさらに小さい複数のトークンに分割される場合もある（サブワード分割）。

■サブワード分割（サブワード正則化）

ChatGPTでは、Byte Pair Encoding (BPE) アルゴリズムを使用して、テキストを「サブワード分割」（トークナイズ）している。

サブワードは単語よりも小さくなる場合がある。たとえば`Azure OpenAI Service`は、`Az/ure/ Open/AI/ Service`のようにサブワード分割される。

サブワード分割は、ニューラル言語処理の分野で広く使われている手法であり、機械翻訳や自然言語生成などに応用されている。

■BPE（Byte Pair Encoding）

ChatGPTは、Byte Pair Encoding (BPE) というアルゴリズムでトークンを生成しており、頻出する文字列や単語をトークンとして扱う。

BPEとは、Byte Pair Encodingの略で、テキストを圧縮するアルゴリズムの一種。BPEでは、テキストをバイト単位で分割し、最も頻出するバイトのペアを新しいバイトに置き換えていく。

■パラメーター

https://www.promptingguide.ai/jp/introduction/settings

- Temperature
  - この値を下げると、より事実に基づいた簡潔な回答が得られる
  - この値を上げると、ランダム性が増し、より多様で創造的な回答が得られる
  - 詩の生成などの創造的なタスクでは、temperatureを上げる
- Top_p
  - この値を下げると、正確で事実に基づく回答が得られる
  - この値を上げると、多様な回答が得られる

■TemperatureとTop_pはどのように調節すればよいのか？

- 
- [GPT-4モデルでは、Top_pパラメータは削除されている。]()
  - https://isid-ai.jp/column/chatgpt-performance-comparison
  - https://www.qes.co.jp/media/open-ai/a279


■知識チェック

https://learn.microsoft.com/ja-jp/training/modules/get-started-openai/9-knowledge-check

- 第1問: ChatGPT の機能にアクセスする目的でデプロイできる Azure OpenAI 基本モデルは何ですか?
  - gpt-35-turbo
  - ChatGPTは、OpenAI社が提供するチャットボット。Webアプリ、またはiOS/Androidモバイルアプリから利用できる。
  - ChatGPTの内部では、GPT-3.5 や GPT-4 などのモデルが使用されている。
  - したがって、ChatGPT(と同じ)機能を利用するには、GPT-3.5(-turbo)モデルをAzure OpenAI Serviceにデプロイすればよい。
- 第2問: 返される入力候補のランダム性またはクリエイティブ性を変更するには、どのパラメーターを調整できますか?
  - 温度（気温、temperature）
- 第3問: 会話イン、メッセージアウトのシナリオをサポートできる Azure OpenAI Studio プレイグラウンドはどれですか?
  - チャット
