# 仮想ネットワーク(Virtual Network, VNet)

■VNetとは？

https://learn.microsoft.com/ja-jp/azure/virtual-network/virtual-networks-overview


```
vnet1 (10.0.0.0/16)
├subnet1 (10.0.0.0/24) - NSG1
│ └nic1 (10.0.0.4)
│   └vm1
└subnet2 (10.0.1.0/24) - NSG2
  └nic2 (10.0.1.4)
    └vm2

vnet2 (10.1.0.0/16)
└subnet3 (10.1.0.0/24) - NSG3
  └nic3 (10.1.0.4)
    └vm3
```

- Azure クラウド内のプライベートなネットワーク
- VM（Virtual Machine, 仮想マシン）、VMSS（仮想マシンスケールセット）などのリソースをデプロイするために使用される
  - ストレージアカウントなど、Azureのその他の多くのリソースは、VNetの外側に配置される。
- 他のVNetとは「論理的に」分離されている
  - 「ピアリング」などで、2つのVNetを明示的に接続しない限り、あるVNet内のリソースは、他のVNet内のリソースと通信できない。
- VPNや専用線（ExpressRoute）を使用して、オンプレミスと安全に接続できる
  - ExpressRouteを使用する場合、トラフィックはインターネットを経由しない
- 「ネットワークセキュリティグループ」(NSG)を使用して、セキュリティ規則を設定し、IPアドレスやポート番号などで通信規則を定義できる（許可・拒否）
- 「アプリケーションセキュリティグループ」（ASG）を使用して、VMをグループ化することができる。ASGで定義されたグループは、NSGのセキュリティ規則で、送信元・送信先として、IPアドレスの代わりに指定することができる。
- 「サービスエンドポイント」を使用して、VNet内から、ストレージアカウントなどのAzure サービスに安全に直接接続できる。
- 「Azure Private Link」を使用して、VNet内に作成される「プライベートエンドポイント」経由で、ストレージアカウントなどのAzure サービスに安全に直接接続できる。
